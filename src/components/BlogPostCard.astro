---
import { Image } from "astro:assets";
import { DateDisplay } from "./date-display";

interface Props {
  slug: string;
  title: string;
  description: string;
  createdAt: Date;
  cover?: string;
}

const { slug, title, description, createdAt } = Astro.props;

// Get the cover image path
let cover = Astro.props.cover;
if (!cover) {
  cover = `/images/${slug}/cover.png`;
}

// Infer the blog post pathname from the slug
const posePathname = `/posts/${slug}`;
---

<a
  class="flex w-full flex-col overflow-clip rounded-md border-2 bg-panel shadow-lg transition-transform delay-150 duration-300 ease-in-out hover:-translate-y-2 hover:scale-105 hover:cursor-pointer card-landscape:max-h-[13rem] card-landscape:flex-row"
  href={posePathname}
>
  {/* Cover image */}
  <div
    class="w-full overflow-clip border-b-2 card-landscape:h-full card-landscape:w-1/2 card-landscape:border-b-0 card-landscape:border-r-2"
  >
    <Image src={cover} alt="Blog Post Cover" width={1792} height={1024} />
  </div>

  {/* Details */}
  <div class="flex flex-col gap-2 px-4 py-2 card-landscape:w-1/2">
    {/* Title */}
    <p class="w-full text-xl text-code-class md:text-2xl">
      {title}
    </p>

    {/* Creation date */}
    <DateDisplay
      className="text-xs text-code-string md:text-sm"
      date={createdAt}
    />

    {/* Description */}
    <p
      class="text-md text-code-variable md:text-lg card-landscape:overflow-auto"
    >
      {description}
    </p>
  </div>
</a>
